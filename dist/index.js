/*!
 * responsive-gsap 1.0.0
 * https://github.com/phucbm/responsive-gsap
 *
 * @license MIT
 * @author: phucbm, https://github.com/phucbm
 */
import{useGSAP as L}from"@gsap/react";import y from"gsap";y.registerPlugin(L);function E(o,u){let{scope:S,dependencies:C,revertOnUpdate:b,observeResize:p,playAfterLoad:a=!1,debug:e=!1}=u||{};return L((x,v)=>{let A=w(S);if(!A){console.warn("[useGSAPResponsive] No root element found");return}if(e&&console.log("[useGSAPResponsive] Initializing"),!v){console.error("[useGSAPResponsive] contextSafe not provided by useGSAP");return}let T=v,P=Array.isArray(o),i=P?o:null,d=P?null:o,t;if(a)if(typeof a=="object")t=a;else throw new Error("[useGSAPResponsive] playAfterLoad is true but no handlers provided. Use playAfterLoad: { isLoadComplete, isLoadingEnabled, onLoadComplete, offLoadComplete }");let m=y.matchMedia(),R=A,s={tl:null},r;function f(n){return()=>{e&&console.log("[useGSAPResponsive] Running setup"),r&&(e&&console.log("[useGSAPResponsive] Running user cleanup"),r());let l=n(R,T);l?(s.tl=l.timeline||null,r=l.cleanup):(s.tl=null,r=void 0),e&&(console.log("[useGSAPResponsive] Timeline captured:",s.tl),t&&console.log("[useGSAPResponsive] isLoadComplete:",t.isLoadComplete())),a&&s.tl&&(t.isLoadingEnabled()?(s.tl.paused()||(e&&console.log("[useGSAPResponsive] Pausing timeline (playAfterLoad enabled)"),s.tl.pause()),t.isLoadComplete()&&(e&&console.log("[useGSAPResponsive] Playing timeline (load already complete)"),s.tl.play())):(e&&console.log("[useGSAPResponsive] Loading disabled, playing timeline immediately"),s.tl.play()))}}let G=()=>{if(!a||!t)return;let n=()=>{e&&console.log("[useGSAPResponsive] Load complete event fired"),s.tl&&(e&&console.log("[useGSAPResponsive] Playing timeline on load complete"),s.tl.play())};return t.onLoadComplete(n),()=>{e&&console.log("[useGSAPResponsive] Cleaning up load complete listener"),t.offLoadComplete(n)}};i&&i.length>0?(e&&console.log("[useGSAPResponsive] Setting up media queries:",i.length),i.forEach(({query:n,setup:l})=>{m.add(n,()=>(f(l)(),G()))})):d&&(e&&console.log("[useGSAPResponsive] Setting up with default media query"),m.add("(min-width: 0px)",()=>(f(d)(),G())));let c=null;if(p){e&&console.log("[useGSAPResponsive] Setting up ResizeObserver for:",p);let n=R.querySelectorAll(p);if(n.length>0){let l=i&&i.length>0?f(i[0].setup):d?f(d):null;if(l){let g=null;c=new ResizeObserver(()=>{g&&clearTimeout(g),g=setTimeout(()=>{e&&console.log("[useGSAPResponsive] Resize detected, re-running setup"),l()},150)}),n.forEach(h=>c.observe(h)),e&&console.log("[useGSAPResponsive] Observing",n.length,"elements")}}else e&&console.log("[useGSAPResponsive] No elements found for selector:",p)}return()=>{e&&console.log("[useGSAPResponsive] Cleaning up"),m.revert(),c&&c.disconnect(),r&&r()}},{scope:S,dependencies:C,revertOnUpdate:b})}function w(o){let u=null;if(!o){console.warn("[useGSAPResponsive] No scope provided");return}return typeof o=="object"&&"current"in o?u=o.current:typeof o=="string"?u=typeof document<"u"?document.querySelector(o):null:o instanceof Element&&(u=o),u}export{E as useGSAPResponsive};
//# sourceMappingURL=index.js.map